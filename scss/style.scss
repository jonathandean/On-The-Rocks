/*
Theme Name: On The Rocks
Theme URI: http://jonathandean.com/
Description: Lightweight WordPress theme using SASS, Bourbon and Neat
Author: Jonathan E. Dean
Author URI: http://jonathandean.com/
Version: 0.1

License: 

   Copyright 2012 Jonathan E. Dean

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
   
License URI: http://www.apache.org/licenses/LICENSE-2.0

*/
// HTML5 alternative to a reset css: https://github.com/necolas/normalize.css
@import "normalize";
// Bourbon: SASS Mixin library
// https://github.com/thoughtbot/bourbon
@import "bourbon/bourbon";
// Custom settings for Neat and other variables
@import "variables";
// Neat: Fluid grid framework
// https://github.com/thoughtbot/neat
@import "grid-settings";
@import "neat/neat";
// Custom mixins
@import "mixins";
// Typography
@import "typography";
// Show the current CSS breakpoint in the WordPress admin bar
@import "debug-breakpoints";

body{
  font: 14px/1 $font-family;
  color: $dark-font-color;
  -webkit-text-size-adjust: 100%;
  position:relative;
  background-color: $page-background-color;
}

a{
  color: $dark-font-color;
}
a:visited{
  color: $visited-link-color;
}
a:active{
  color: $active-link-color;
}

header.main{
  background-color: $header-top-background-color;
  border-top: $header-top-border-size solid $header-top-border-color;
  &, a{
    color: $light-font-color;
  }
  a{
    @include underline-on-hover;
  }
  .container{
    @include outer-container;
    h1{
      @include span-columns($header-logo-columns);
      color: $logo-color;
      font-weight: normal;
      //text-transform: lowercase; // TODO move to child
      padding-left: $content-side-padding;
      text-shadow: 3px 4px 6px rgba(0,0,0,.5);
      margin-top: 10px;
      margin-bottom: 10px;
    }
    nav{
      @include span-columns($header-nav-columns);
      ul{
        @include floated-list;
        padding-top: 1em;
        float: right;
        padding-right: $content-side-padding;
        li{
          padding-right: 1em;
          &:last-child{
            padding-right: 0;
          }
        }
      }
    }
    @include media($small-devices){
      h1, nav{
        @include span-columns(12);
      }
      nav{
        ul{
          float: left;
          padding-left: $content-side-padding;
          padding-top: 0;
          li a{
            padding-top: 10px;
            padding-bottom: 10px;
          }
        }
      }
    }
  }
  border-bottom: 10px solid rgba(0,0,0,0.1);
  -moz-background-clip: padding-box;     /* Firefox 3.6 */
  -webkit-background-clip: padding-box;  /* Safari 4? Chrome 6? */
  background-clip: padding-box;      /* Firefox 4, Safari 5, Opera 10, IE 9 */
}
#content{
  .container{
    @include outer-container;

    &.with-sidebar{
      section.posts{
        @include span-columns(8);
      }
      aside.sidebar{
        @include span-columns(4);
        ul.sidebar{
          @include unformatted-list;
        }
      }
      @include media($small-devices) {
        section.posts,
        aside.sidebar{
          @include span-columns(12);
        }
      }
    }
    article.post,
    aside.sidebar{
      margin: 20px 0;
    }
    article.post{
      @include border-radius($article-border-radius);
      box-shadow: 0 0 14px 1px rgba(0,0,0,0.1); // why is this necessary?
      @include box-shadow(0 0 14px 1px rgba(0,0,0,0.1));
      background: $article-background-color;
      border: $article-border-size solid $article-border-color;
      padding: 30px $content-side-padding;
      h1{
        margin: 0 0 $heading-border-spacing;
        padding: 5px 0;
        border-bottom: 4px double $heading-border-color;
        a{
          @include underline-on-hover;
          color: $title-font-color;
          &:visited{
            color: $visited-link-color;
          }
          &:active{
            color: $active-link-color;
          }
        }
      }
      .content{
        line-height: 1.5;
      }
      footer.meta{
        margin-top: 20px;
        color: $subtle-font-color;
        .date{
          span{
            display: none;
          }
        }
        .author{
          display: none;
        }
      }
      .more-link{
        color: $subtle-font-color;
        font-style: italic;
      }
    }
    article.comments{
      background-color: $comments-background-color;
      h2.comments-title{
        border-top: 4px double $heading-border-color;
        border-bottom: 4px double $heading-border-color;
        padding: $heading-border-spacing 0;
      }
      ol{
        @include unformatted-list;
        ol{
          @include nested-comment(1);
          ol{
            @include nested-comment(2);
            ol{
              @include nested-comment(3);
              ol{
                @include nested-comment(4);
                ol{
                  @include nested-comment(5);
                  ol{
                    @include nested-comment(6);
                    ol{
                      @include nested-comment(7);
                      ol{
                        @include nested-comment(8);
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    article.collapse{
      padding: 0 $content-side-padding;
      margin: 10px 0;
      header{
        display: none;
      }
      background: transparent;
      border: none;
      box-shadow: none;
      @include box-shadow(none);
      p{
        margin-bottom: 0;
      }
      footer.meta{
        .author,
        .category,
        .comments,
        .edit-post{
          display: none;
        }
      }
    }
    article.hidden{
      display: none;
    }
    nav.pagination{
      @include outer-container;
      .previous, .next{
        @include span-columns(6);
      }
      .previous{
        text-align: right;
      }
    }
  }
}